# ==============================================================================
# Hyprland NVIDIA Configuration
# ==============================================================================
# Settings for hybrid AMD/NVIDIA laptops running Wayland

# ------------------------------------------------------------------------------
# NVIDIA Environment Variables
# ------------------------------------------------------------------------------
# Use NVIDIA driver for VA-API (video acceleration)
env = LIBVA_DRIVER_NAME,nvidia

# Set session type to Wayland
env = XDG_SESSION_TYPE,wayland

# Use nvidia-drm as GBM backend
env = GBM_BACKEND,nvidia-drm

# Use NVIDIA for GLX
env = __GLX_VENDOR_LIBRARY_NAME,nvidia

# ------------------------------------------------------------------------------
# Cursor Workarounds
# ------------------------------------------------------------------------------
# Disable hardware cursors (fixes invisible cursor on some NVIDIA setups)
env = WLR_NO_HARDWARE_CURSORS,1

# Alternative: Use software cursors in Hyprland
# cursor:no_hardware_cursors = true

# ------------------------------------------------------------------------------
# Multi-GPU Configuration
# ------------------------------------------------------------------------------
# Specify DRM device order (NVIDIA first, then AMD)
# Adjust card numbers based on your system (check /dev/dri/)
env = WLR_DRM_DEVICES,/dev/dri/card1:/dev/dri/card0

# ------------------------------------------------------------------------------
# Additional NVIDIA Tweaks
# ------------------------------------------------------------------------------
# Enable explicit sync (improves frame pacing)
# env = __GL_ExperimentalPerfStrategy,1

# VSync settings
# env = __GL_SYNC_TO_VBLANK,1

# ------------------------------------------------------------------------------
# Electron/Chromium Wayland Support
# ------------------------------------------------------------------------------
# Force Electron apps to use Wayland
env = ELECTRON_OZONE_PLATFORM_HINT,auto

# Chromium/Chrome flags for Wayland
# env = CHROMIUM_FLAGS,--enable-features=UseOzonePlatform --ozone-platform=wayland

# ------------------------------------------------------------------------------
# Qt/GTK Wayland Support
# ------------------------------------------------------------------------------
# Qt applications use Wayland
env = QT_QPA_PLATFORM,wayland;xcb

# GTK applications prefer Wayland
env = GDK_BACKEND,wayland,x11

# SDL applications use Wayland
env = SDL_VIDEODRIVER,wayland

# Clutter uses Wayland
env = CLUTTER_BACKEND,wayland

# ------------------------------------------------------------------------------
# XDG Session Variables
# ------------------------------------------------------------------------------
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland
