{
  "$schema": "https://opencode.ai/config.json",
  "agent": {
    "architect": {
      "description": "Primary agent for brainstorming, design, and planning. Automatically activates before implementation.",
      "mode": "primary",
      "model": "anthropic/claude-sonnet-4.5-20250514",
      "prompt": "{file:./prompts/architect.txt}",
      "tools": {
        "write": true,
        "edit": false,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "build": {
      "description": "Primary implementation agent for writing production code. The main workhorse for code generation.",
      "mode": "primary",
      "model": "anthropic/claude-sonnet-4.5-20250514",
      "prompt": "{file:./prompts/build.txt}",
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "orchestrator": {
      "description": "Primary agent for managing complex multi-step workflows and coordinating subagents. Uses Opus for maximum intelligence.",
      "mode": "primary",
      "model": "anthropic/claude-opus-4.5-20250514",
      "prompt": "{file:./prompts/orchestrator.txt}",
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true,
        "task": true
      }
    },
    "plan": {
      "description": "Fast planning agent for breaking down tasks. Uses Haiku for speed.",
      "mode": "subagent",
      "model": "anthropic/claude-haiku-4.5-20250514",
      "prompt": "{file:./prompts/plan.txt}",
      "tools": {
        "write": true,
        "edit": false,
        "bash": false,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "review": {
      "description": "Code review specialist for quality assurance and security analysis.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4.5-20250514",
      "prompt": "{file:./prompts/review.txt}",
      "tools": {
        "write": false,
        "edit": false,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "refactor": {
      "description": "Code refactoring and optimization specialist.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4.5-20250514",
      "prompt": "{file:./prompts/refactor.txt}",
      "tools": {
        "write": false,
        "edit": true,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "test": {
      "description": "Testing specialist for TDD and comprehensive test coverage.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4.5-20250514",
      "prompt": "{file:./prompts/test.txt}",
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "debug": {
      "description": "Debugging specialist for systematic problem-solving.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4.5-20250514",
      "prompt": "{file:./prompts/debug.txt}",
      "tools": {
        "write": false,
        "edit": true,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "research": {
      "description": "Codebase exploration and investigation specialist. Fast and thorough.",
      "mode": "subagent",
      "model": "anthropic/claude-haiku-4.5-20250514",
      "prompt": "{file:./prompts/research.txt}",
      "tools": {
        "write": false,
        "edit": false,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "explore": {
      "description": "Fast agent for quick codebase exploration. Uses Haiku for speed.",
      "mode": "subagent",
      "model": "anthropic/claude-haiku-4.5-20250514",
      "prompt": "{file:./prompts/explore.txt}",
      "tools": {
        "write": false,
        "edit": false,
        "bash": false,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "general": {
      "description": "General-purpose agent for multi-step tasks. Uses Sonnet for balanced capability.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4.5-20250514",
      "prompt": "{file:./prompts/general.txt}",
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true,
        "webfetch": true
      }
    },
    "document": {
      "description": "Documentation specialist for technical writing.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4.5-20250514",
      "prompt": "{file:./prompts/document.txt}",
      "tools": {
        "write": true,
        "edit": true,
        "bash": false,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "optimize": {
      "description": "Performance optimization specialist.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4.5-20250514",
      "prompt": "{file:./prompts/optimize.txt}",
      "tools": {
        "write": false,
        "edit": true,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "nix-specialist": {
      "description": "NixOS and Nix language specialist for system configuration.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4.5-20250514",
      "prompt": "{file:./prompts/nix-specialist.txt}",
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "security": {
      "description": "Security analysis and hardening specialist.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4.5-20250514",
      "prompt": "{file:./prompts/security.txt}",
      "tools": {
        "write": false,
        "edit": false,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true
      }
    },
    "fix": {
      "description": "Fast bug fix specialist using Haiku for quick iterations.",
      "mode": "subagent",
      "model": "anthropic/claude-haiku-4.5-20250514",
      "prompt": "{file:./prompts/fix.txt}",
      "tools": {
        "write": false,
        "edit": true,
        "bash": true,
        "read": true,
        "glob": true,
        "grep": true
      }
    }
  },
  "workflows": {
    "feature-development": {
      "description": "Complete feature development workflow from design to deployment",
      "steps": [
        {
          "agent": "architect",
          "task": "Design and plan the feature"
        },
        {
          "agent": "plan",
          "task": "Break down into implementation tasks"
        },
        {
          "agent": "build",
          "task": "Implement the feature"
        },
        {
          "agent": "test",
          "task": "Create comprehensive tests"
        },
        {
          "agent": "review",
          "task": "Review implementation and tests"
        },
        {
          "agent": "document",
          "task": "Document the feature"
        }
      ]
    },
    "nixos-configuration": {
      "description": "NixOS system configuration workflow",
      "steps": [
        {
          "agent": "architect",
          "task": "Plan system configuration changes"
        },
        {
          "agent": "nix-specialist",
          "task": "Implement NixOS modules"
        },
        {
          "agent": "security",
          "task": "Security review and hardening"
        },
        {
          "agent": "review",
          "task": "Final configuration review"
        }
      ]
    },
    "debugging": {
      "description": "Systematic debugging workflow",
      "steps": [
        {
          "agent": "research",
          "task": "Investigate the issue"
        },
        {
          "agent": "debug",
          "task": "Diagnose root cause"
        },
        {
          "agent": "fix",
          "task": "Implement fix"
        },
        {
          "agent": "test",
          "task": "Verify fix with tests"
        }
      ]
    },
    "refactoring": {
      "description": "Code refactoring and optimization workflow",
      "steps": [
        {
          "agent": "research",
          "task": "Analyze current code structure"
        },
        {
          "agent": "refactor",
          "task": "Refactor code"
        },
        {
          "agent": "optimize",
          "task": "Optimize performance"
        },
        {
          "agent": "test",
          "task": "Ensure all tests pass"
        },
        {
          "agent": "review",
          "task": "Review refactored code"
        }
      ]
    }
  }
}
